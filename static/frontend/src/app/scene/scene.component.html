<mat-sidenav #snav mode="over" position="end" [fixedInViewport]="true" [fixedTopGap]="fixedTopGap">
    <mat-accordion>
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <h3>Setup</h3>
                </mat-panel-title>
            </mat-expansion-panel-header>

            <mat-form-field>
                <mat-select [(value)]="selectedFile" placeholder="File">
                    <mat-option *ngFor="let file of files" [value]="file.value" (click)="selectedFileClick(file.value)">
                        {{ file.viewValue }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
            <mat-action-row>
                <button mat-button color="accent" (click)="startCalc()">Start the Calculation</button>
                <button mat-button color="accent" (click)="createHeatmap()">Create Heatmap</button>
            </mat-action-row>
        </mat-expansion-panel>
    </mat-accordion>

    <div fxLayout="column wrap" style="padding-left: 1.5rem; padding-right: 1.5rem;">
        <div fxLayout="row" class="first-item">
            <div>{{epochRange[0]}}</div>
            <div fxFlex="grow"></div>
            <div class="setting-label">Epoch</div>
            <div fxFlex="grow"></div>
            <div>{{epochRange[1]}}</div>
        </div>
        <nouislider [connect]="true" [min]="epochRange[0]" [max]="epochRange[1]" [step]="1" [(ngModel)]="epochValue"></nouislider>
        <mat-slide-toggle [checked]="!showBrainView" (change)="testingToggler($event)" class="setting-item">Neural Netowrk</mat-slide-toggle>
        <mat-slide-toggle class="setting-item last-item">ANN</mat-slide-toggle>
    </div>

    <mat-accordion>
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <h3>Heatmap Config</h3>
                </mat-panel-title>
            </mat-expansion-panel-header>

            <div fxLayout="column wrap">
                <mat-form-field>
                    <input matInput placeholder="Radius" [(value)]="heatmapNormalConfig.radius" (change)="heatmapNormalConfig.radius = $event.target.value; refreshHeatmap()" type="number">
                </mat-form-field>
                <mat-form-field>
                    <input matInput placeholder="Blur" [(value)]="heatmapNormalConfig.blur" (change)="heatmapNormalConfig.blur = $event.target.value; refreshHeatmap()" type="number">
                </mat-form-field>
                <div fxLayout="row">
                    <div class="setting-label">Minimum Opacity</div>
                    <div fxFlex="grow"></div>
                    <div>{{(heatmapNormalConfig.minOpacity/100)}}</div>
                </div>
                <mat-slider min="1" max="100" step="1" [value]="heatmapNormalConfig.minOpacity" (input)="heatmapNormalConfig.minOpacity=$event.value;"></mat-slider>
                <label for="">Color 1</label>
                <div fxLayout="row">
                    <mcc-color-picker [usedColorLabel]="'My Colors'" [usedSizeColors]="'7'" (change)="heatmapNormalConfig.color1=$event; refreshHeatmap()"
                        (selected)="heatmapNormalConfig.color1=$event; refreshHeatmap()" fxFlex="grow">
                        <mcc-color-picker-collection [label]="'First Collection'" [colors]="colors" [size]="16"> </mcc-color-picker-collection>
                    </mcc-color-picker>
                </div>
                <div fxLayout="row">
                    <div class="setting-label">Color 1 Trigger</div>
                    <div fxFlex="grow"></div>
                    <div>{{(heatmapNormalConfig.color1Trigger/100)}}</div>
                </div>
                <mat-slider min="1" max="100" step="1" [value]="heatmapNormalConfig.color1Trigger/100.0" (input)="heatmapNormalConfig.color1Trigger=$event.value/100.0; refreshHeatmap()"></mat-slider>
                <label for="">Color 2</label>
                <div fxLayout="row">
                    <mcc-color-picker [usedColorLabel]="'My Colors'" [usedSizeColors]="'7'" (change)="heatmapNormalConfig.color2=$event; refreshHeatmap()"
                        (selected)="heatmapNormalConfig.color2=$event; refreshHeatmap()" fxFlex="grow">
                        <mcc-color-picker-collection [label]="'First Collection'" [colors]="colors" [size]="16"> </mcc-color-picker-collection>
                    </mcc-color-picker>
                </div>
                <div fxLayout="row">
                    <div class="setting-label">Color 2 Trigger</div>
                    <div fxFlex="grow"></div>
                    <div>{{(heatmapNormalConfig.color2Trigger/100)}}</div>
                </div>
                <mat-slider min="1" max="100" step="1" [value]="heatmapNormalConfig.color2Trigger/100.0" (input)="heatmapNormalConfig.color2Trigger=$event.value/100.0; refreshHeatmap()"></mat-slider>
                <label for="">Color 3</label>
                <div fxLayout="row">
                    <mcc-color-picker [usedColorLabel]="'My Colors'" [usedSizeColors]="'7'" (change)="heatmapNormalConfig.color3=$event; refreshHeatmap()"
                        (selected)="heatmapNormalConfig.color3=$event; refreshHeatmap()" fxFlex="grow">
                        <mcc-color-picker-collection [label]="'First Collection'" [colors]="colors" [size]="16"> </mcc-color-picker-collection>
                    </mcc-color-picker>
                </div>
                <div fxLayout="row">
                    <div class="setting-label">Color 3 Trigger</div>
                    <div fxFlex="grow"></div>
                    <div>{{(heatmapNormalConfig.color3Trigger/100)}}</div>
                </div>
                <mat-slider min="1" max="100" step="1" [value]="heatmapNormalConfig.color3Trigger/100.0" (input)="heatmapNormalConfig.color3Trigger=$event.value/100.0; refreshHeatmap()"></mat-slider>
            </div>
        </mat-expansion-panel>
    </mat-accordion>

    <mat-accordion>
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <h3>Demo Layer</h3>
                </mat-panel-title>
            </mat-expansion-panel-header>

            <div fxLayout="column wrap">
                <div fxLayout="row">
                    <div class="setting-label">Layer Count</div>
                    <div fxFlex="grow"></div>
                    <div>{{layerCount}}</div>
                </div>
                <mat-slider min="1" max="100" step="1" [value]="layerCount" (input)="layerCount=$event.value;"></mat-slider>
                <div fxLayout="row">
                    <div class="setting-label">Node Count</div>
                    <div fxFlex="grow"></div>
                    <div>{{nodeCount}}</div>
                </div>
                <mat-slider min="1" max="100" step="1" [value]="nodeCount" (input)="nodeCount=$event.value;"></mat-slider>
                <mat-slide-toggle class="setting-item last-item">Edge Case</mat-slide-toggle>
                <mat-action-row>
                    <button mat-button color="accent">Create Network</button>
                </mat-action-row>

            </div>
        </mat-expansion-panel>
    </mat-accordion>

</mat-sidenav>

<mat-sidenav-content>
    <!-- <canvas #canvas id="testcanvas"></canvas> -->
    <app-brain #brainComponent (updatedHeatmapNormalData)="updateHeatmapData($event,'normal')" (updatedHeatmapNodeData)="updateHeatmapData($event,'node')"
        (updatedHeatmapCanvasNormalTexture)="updateHeatmapCanvasTexture($event,'normal')" (updatedHeatmapCanvasNodeTexture)="updateHeatmapCanvasTexture($event,'node')"></app-brain>
    <app-molecule #moleculeComponent></app-molecule>
</mat-sidenav-content>