<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>NGNetz</title>
  <base href="/">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>
    <canvas id="canvHeatmap" width="1024" height="1024"></canvas>
    <script id="vertex_shader" type="x-shader/x-vertex">
      
              varying vec2 vUv;
              varying vec3 vNormal;
              varying vec3 vViewPosition;
      
              void main() {
      
                vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
      
                vUv = uv;
                vNormal = normalize( normalMatrix * normal );
                vViewPosition = -mvPosition.xyz;
      
                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
      
              }
      
            </script>
      
          <script id="fragment_shader" type="x-shader/x-fragment">
      
              uniform sampler2D brainTexture;
              uniform sampler2D heatmapTexture;
              uniform sampler2D alphaTexture;
              uniform vec3 color;
              varying vec2 vUv;
              varying vec3 vNormal;
              varying vec3 vViewPosition;
      
              void main() {
              vec4 tc = vec4(color.r, color.g, color.b, 1.0 );
                // brain texture
                vec4 brain = texture2D( brainTexture, vUv );
                // heatmap texture
                vec4 heatmap = texture2D( heatmapTexture, vUv );
                // alpha map
                float alpha = texture2D( alphaTexture, vUv ).r;
      
                // hack in a fake pointlight at camera location, plus ambient
                vec3 normal = normalize( vNormal );
                vec3 lightDir = normalize( vViewPosition );
      
                float dotProduct = max( dot( normal, lightDir ), 0.0 ) + 0.2;
      
                  //gl_FragColor = vec4( mix( brain.rgb, heatmap.rgb, heatmap.a ), 1.0 ) * dotProduct;
      
                  vec4 mix_c = heatmap + tc * heatmap.a;
                  // correct one:
                  //gl_FragColor = vec4( mix( brain, heatmap, alpha ).rgb * dotProduct, 1.0 );
      
                  // old one to show without alpha:
                  gl_FragColor = vec4( mix( brain.rgb, mix_c.xyz, heatmap.a ), 1.0 ) * dotProduct;
                  // old one to mix without looking good
                  //gl_FragColor = mix( brain, heatmap, alpha );
              }
      
          </script>
  <app-root></app-root>
</body>

</html>